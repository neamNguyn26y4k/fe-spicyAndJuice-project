<!DOCTYPE html>
<html lang="vi">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đặt hàng - Spicy & Juicy</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" href="/src/assets/images/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/src/css/style.css">
    <link rel="stylesheet" href="/src/css/order.css">
</head>
<body>
    <div id="main">
        <!-- Header sẽ được load động từ header.html -->
        <div id="header"></div>
        
        <!-- Nội dung chính của trang đặt hàng -->
        <div class="page-content">
            <div class="page">

        <!-- Thanh tiến trình đặt hàng (3 bước: Giỏ hàng -> Hoàn tất thông tin -> Thanh toán) -->
        <div class="progress">
            <div class="progress__step">
                <div class="progress__icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <rect x="3" y="6" width="14" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M7 6V5C7 3.34315 8.34315 2 10 2C11.6569 2 13 3.34315 13 5V6" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </div>
                <span class="progress__label">Giỏ hàng</span>
            </div>
            <div class="progress__line"></div>
            <div class="progress__step progress__step--active">
                <div class="progress__icon progress__icon--active">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </div>
                <span class="progress__label progress__label--active">Hoàn tất thông tin</span>
            </div>
            <div class="progress__line"></div>
            <div class="progress__step">
                <div class="progress__icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <rect x="3" y="5" width="14" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </div>
                <span class="progress__label">Thanh Toán</span>
            </div>
        </div>

        <!-- Nội dung chính: 2 cột (Giỏ hàng bên trái, Thông tin giao hàng bên phải) -->
        <div class="order">
            <!-- Cột bên trái: Hiển thị giỏ hàng và tổng tiền -->
            <div class="cart">
                <!-- Header của giỏ hàng -->
                <div class="cart__header">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.70711 15.2929C4.07714 15.9229 4.52331 17 5.41421 17H17M17 17C15.8954 17 15 17.8954 15 19C15 20.1046 15.8954 21 17 21C18.1046 21 19 20.1046 19 19C19 17.8954 18.1046 17 17 17ZM9 19C9 20.1046 8.10457 21 7 21C5.89543 21 5 20.1046 5 19C5 17.8954 5.89543 17 7 17C8.10457 17 9 17.8954 9 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <h2>Giỏ hàng</h2>
                </div>

                <!-- Danh sách món ăn trong giỏ hàng (được tạo động) -->
                <div class="cart__items" id="cartItems">
                    <!-- Các món ăn sẽ được thêm động vào đây -->
                </div>

                <!-- Phần tính toán tổng tiền -->
                <div class="cart__summary">
                    <div class="cart__row">
                        <span>Giảm giá sản phẩm</span>
                        <span id="discountAmount">58.000 VNĐ</span>
                    </div>
                    <div class="cart__row">
                        <span>Chi phí vận chuyển</span>
                        <span id="shippingFee">25.000 VNĐ</span>
                    </div>
                    <div class="cart__row cart__row--total">
                        <span>Thành tiền</span>
                        <span id="totalAmount">707.000 VNĐ</span>
                    </div>
                </div>

                <!-- Nút đặt món ăn -->
                <button class="cart__btn" id="orderBtn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M7 10L9 12L13 8M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Đặt món ăn
                </button>
            </div>

            <!-- Cột bên phải: Thông tin giao hàng và người nhận -->
            <div class="delivery">
                <!-- Lựa chọn phương thức: Giao hàng tận nơi hoặc Lấy tại chỗ -->
                <div class="delivery__options">
                    <label class="delivery__option delivery__option--active" data-delivery="delivery">
                        <input type="radio" name="delivery" value="delivery" checked>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M13 5H3C1.89543 5 1 5.89543 1 7V13C1 14.1046 1.89543 15 3 15H13M13 5V15M13 5H15L19 9V13C19 14.1046 18.1046 15 17 15H13" stroke="currentColor" stroke-width="1.5"/>
                            <circle cx="5" cy="15" r="2" stroke="currentColor" stroke-width="1.5"/>
                            <circle cx="15" cy="15" r="2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Giao hàng tận nơi</span>
                        <span class="delivery__check">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M3 8L6 11L13 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                    </label>

                    <label class="delivery__option" data-delivery="pickup">
                        <input type="radio" name="delivery" value="pickup">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="6" width="14" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 6V5C7 3.34315 8.34315 2 10 2C11.6569 2 13 3.34315 13 5V6" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        <span>Lấy tại chỗ</span>
                        <span class="delivery__check">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M3 8L6 11L13 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                    </label>
                </div>

                <!-- Phần thông tin lấy hàng tại chỗ (ẩn mặc định, hiện khi chọn "Lấy tại chỗ") -->
                <div class="pickup pickup--hidden" id="pickupInfoSection">
                    <div class="pickup__header">
                        <h3>Thông tin người nhận</h3>
                    </div>
                    
                    <!-- Form nhập thông tin người nhận khi lấy hàng tại chỗ -->
                    <div class="pickup__form" id="pickupForm">
                        <div class="form__group">
                            <input type="text" id="pickupName" class="form__input" placeholder=" " required>
                            <label class="form__label">Họ và tên</label>
                        </div>
                        
                        <div class="form__group">
                            <input type="tel" id="pickupPhone" class="form__input" placeholder=" " required>
                            <label class="form__label">Số điện thoại</label>
                        </div>
                        
                        <div class="form__group">
                            <input type="text" id="pickupTime" class="form__input" placeholder=" " required>
                            <label class="form__label">Thời gian lấy hàng</label>
                        </div>
                        
                        <button class="pickup__btn" id="savePickupBtn">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                <path d="M15 5L7 13L3 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Lưu thông tin
                        </button>
                    </div>
                    
                    <!-- Hiển thị thông tin đã lưu (ẩn ban đầu, hiện sau khi lưu) -->
                    <div class="pickup__display pickup__display--hidden" id="pickupInfoDisplay">
                        <div class="pickup__info">
                            <span class="pickup__info-label">Số điện thoại:</span>
                            <span class="pickup__info-value" id="displayPickupPhone"></span>
                        </div>
                        <div class="pickup__info">
                            <span class="pickup__info-label">Họ và tên:</span>
                            <span class="pickup__info-value" id="displayPickupName"></span>
                        </div>
                        <div class="pickup__info">
                            <span class="pickup__info-label">Thời gian lấy hàng:</span>
                            <span class="pickup__info-value" id="displayPickupTime"></span>
                        </div>
                        <button class="pickup__edit-btn" id="editPickupBtn">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M11.333 2L14 4.667L5.333 13.333H2.667V10.667L11.333 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Chỉnh sửa
                        </button>
                    </div>
                </div>

                <!-- Phần quản lý địa chỉ giao hàng (hiện khi chọn "Giao hàng tận nơi") -->
                <div class="address" id="addressSection">
                    <div class="address__header">
                        <h3>Thông tin người nhận</h3>
                        <button class="address__add-btn" id="addAddressBtn">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            Thêm địa chỉ
                        </button>
                    </div>

                    <!-- Danh sách các địa chỉ đã lưu (được tạo động) -->
                    <div class="address__cards" id="addressCards">
                        <!-- Các card địa chỉ sẽ được thêm động vào đây -->
                    </div>
                </div>

                <!-- Phần hiển thị thông tin địa chỉ giao hàng đã chọn -->
                <div class="map map--hidden" id="mapSection">
                    <div class="map__header">
                        <h3>Địa chỉ nhận hàng</h3>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 11C11.6569 11 13 9.65685 13 8C13 6.34315 11.6569 5 10 5C8.34315 5 7 6.34315 7 8C7 9.65685 8.34315 11 10 11Z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M10 19C10 19 17 13.5 17 8C17 4.13401 13.866 1 10 1C6.13401 1 3 4.13401 3 8C3 13.5 10 19 10 19Z" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>

                    <div class="map__details">
                        <p class="map__text">Địa chỉ: <span id="deliveryAddress"></span></p>
                        <p class="map__text">Số điện thoại: <span id="deliveryPhone"></span></p>
                        <p class="map__text">Họ và tên: <span id="deliveryName"></span></p>
                        <p class="map__text">Thời gian giao hàng: <span id="deliveryTime"></span></p>
                    </div>
                </div>

            </div>
        </div>
        </div>
        </div>
        
        <!-- Footer sẽ được load động từ footer.html -->
        <div id="footer"></div>
    </div>

    <!-- Modal popup để thêm/sửa địa chỉ giao hàng -->
    <div class="modal" id="addressModal">
        <div class="modal__content">
            <div class="modal__header">
                <button class="modal__close" id="closeModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <h3 id="modalTitle">Đăng kí địa chỉ</h3>
            </div>
            <div class="modal__body">
                <div class="form__group">
                    <input type="text" id="addressName" class="form__input" placeholder=" " required>
                    <label class="form__label">Tên địa chỉ</label>
                </div>

                <div class="form__group">
                    <input type="text" id="addressPersonName" class="form__input" placeholder=" " required>
                    <label class="form__label">Họ và tên</label>
                </div>
                
                <div class="form__checkbox">
                    <label class="form__checkbox-label">
                        <input type="checkbox" id="defaultAddress" class="form__checkbox-input">
                        <span class="form__checkbox-custom">
                            <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                                <path d="M2 6L5 9L10 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        <span class="form__checkbox-text">Địa chỉ mặc định</span>
                    </label>
                </div>

                <div class="form__group">
                    <input type="tel" id="addressPhone" class="form__input" placeholder=" " required>
                    <label class="form__label">Số điện thoại</label>
                </div>

                <div class="form__group">
                    <input type="text" id="addressTime" class="form__input" placeholder=" " required>
                    <label class="form__label">Thời gian nhận hàng</label>
                </div>
            </div>
            <div class="modal__footer">
                <!-- Nút xác nhận thêm/sửa địa chỉ -->
                <button class="modal__btn" id="confirmBtn">
                    <span id="confirmBtnText">Xác nhận</span>
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript files -->
    <script src="/src/js/loader.js"></script> 
    <script src="/src/js/data.js"></script> 
    <script src="/src/js/order.js"></script> 
</body>
</html>